class StepsController < ApplicationController

  def create
    @step = Step.new(step_params)
    if @step.save
      redirect_to plan_path(@step.plan), notice: "A new step has been added to this ERP plan!"
    else
      flash.now[:error] = "Your attempt to add a new step to this ERP plan was unsuccessful. Please try again."
      render "plans/show"
    end
  end

  def update # PATCH request to "/plans/:plan_id/steps/:id" maps to steps#update
    raise params.inspect
  end

  private

    def step_params
      params.require(:step).permit(
        :instructions,
        :duration,
        :plan_id,
        :discomfort_degree,
        :status
      )
    end

end
