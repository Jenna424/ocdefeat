<%= form_for @obsession do |obsession_builder| %>
  <% if @obsession.errors.any? %>
    <div id= "error_explanation">
      <h2>
        <%= pluralize(@obsession.errors.count, "error") %> prohibited this obsession from being saved:
      </h2>
      <ul>
        <% @obsession.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= obsession_builder.label :intrusive_thought, "Identify the anxiety-inducing intrusive idea:" %>
    <br>
    <%= obsession_builder.text_area :intrusive_thought, placeholder: "What if I..." %>
  </div>

  <br>

  <div class="field">
    <%= obsession_builder.label :triggers, "What precipitates a prolonged period of obsession?" %>
    <br>
    <%= obsession_builder.text_area :triggers, placeholder: "My obsession is triggered by..." %>
  </div>

  <br>

  <div class="field">
    <%= obsession_builder.label :time_consumed, "On average, how much time is consumed by this obsession daily?" %>
    <br>
    <%= obsession_builder.number_field :time_consumed, min: 0, max: 24, step: :any %> <strong>hour(s)</strong>
  </div>

  <br>

  <div class="field">
    <%= obsession_builder.label :anxiety_rating, "On a scale of 1-10, rate the intensity of the discomfort produced by your obsession:" %>
    <%= obsession_builder.number_field :anxiety_rating, min: 1, max: 10 %>
  </div>

  <br>

  <div class="field">
    <%= obsession_builder.label :symptoms, "How (if at all) does your OCD manifest physically?" %>
    <br>
    <%= obsession_builder.text_field :symptoms, placeholder: "I experience..." %>
  </div>

  <br>

  <div class="field">
    <%= obsession_builder.label :rituals, "What rituals do you engage in to \"undo\" the discomfort produced by your obsession?" %>
    <br>
    <%= obsession_builder.text_area :rituals, placeholder: "I am constantly..." %>
  </div>

  <br>

  <% if !themes.empty? %>
    <label>Select OCD subset(s) in which to classify your obsession:</label>

    <br><br>

    <%= obsession_builder.collection_check_boxes(:theme_ids, themes, :id, :name) do |b| %>
      <p>
        <%= b.label :class => "red-outline" %>
        <%= b.check_box %>
      </p>
    <% end %>

    <br>
  <% end %>

  <label>Create a new OCD subset in which to classify your obsession:</label>

  <br><br>

  <div class="field">
    <%= obsession_builder.fields_for :themes, Theme.new do |theme_builder| %>
      <%= theme_builder.label :name, "OCD Theme:" %><br>
      <%= theme_builder.text_field :name, :value => '', placeholder: "I classify my OCD as..." %>
    <% end %>
  </div>

  <br>

  <div class="actions">
    <%= obsession_builder.submit %>
  </div>
<% end %>
